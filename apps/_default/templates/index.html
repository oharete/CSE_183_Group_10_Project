[[extend 'layout.html']]

<style>
    [v-cloak] {
        display: none;
    }
    #map {
        height: 500px; /* Map height */
    }
</style>

<div class="section" id="app" v-cloak>
    <section class="section">
        <h1 class="title"><i class="fa-solid fa-dove"></i> Bird Watching App</h1>
        <h2 class="subtitle">Explore bird sightings and statistics</h2>
    </section>

    <!-- Navigation Buttons -->
    <section class="section">
        <div class="buttons">
            <button class="button is-link" @click="window.location.href='/checklist'">Submit Checklist</button>
            <button class="button is-info" @click="window.location.href='/user_stats'">My Birding Stats</button>
        </div>
    </section>

    <!-- Species Selector -->
    <section class="section">
        <div class="field">
            <label class="label">Select Species</label>
            <div class="control">
                <input type="text" class="input" v-model="selectedSpecies" placeholder="Search for a species" @input="fetchSpecies">
            </div>
            <div v-if="speciesSuggestions.length > 0" class="dropdown is-active">
                <div class="dropdown-menu">
                    <div class="dropdown-content">
                        <a v-for="species in speciesSuggestions" :key="species.id" class="dropdown-item" @click="selectSpecies(species.name)">
                            {{ species.name }}
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Map Section -->
    <section class="section">
        <div id="map"></div>
    </section>

    <!-- Rectangle Statistics Button -->
    <section class="section">
        <button class="button is-success" @click="showRegionStats">Statistics on Selected Region</button>
    </section>
</div>

[[block page_scripts]]
<link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css">
<script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>

<script src="/static/js/index.js"></script>
[[end]]
